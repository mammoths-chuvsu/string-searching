# Итоговый отчет о результатах тестирования поиска подстрок

## Цель тестирования

Целью тестирования было оценить производительность различных алгоритмов поиска подстрок в текстах разной длины и с шаблонами разного размера. Мы протестировали следующие гипотезы:

1. **Brute-force (наивный поиск)** окажется самым медленным на больших объемах данных.
2. **Алгоритмы с предобработкой (KMP, Z-algorithm, Aho-Corasick)** покажут стабильно хорошее время работы на длинных текстах, особенно если подстрока отсутствует.
3. **Rabin-Karp** будет эффективнее на коротких шаблонах, но его случайные коллизии могут приводить к дополнительным пересчетам.
4. **Shift-or** покажет хорошие результаты только на коротких подстроках (до 63 символов).
5. **Разные операционные системы** могут оказывать влияние на производительность (менеджмент памяти, особенности кеширования и компиляции).

Тестирование проводилось на трех операционных системах: **Ubuntu Linux, Windows и macOS**.

Каждый тестовый случай запускался по 10 раз, в таблице продолжительность -- среднее арифметическое значение продолжительностей запусков. **В скобках указан квадрат стандартного отклонения**.

### **1. Текст 1,000,000 символов, паттерн 10,000 символов (Подстрока найдена)**

| Алгоритм      | Ubuntu (мс) | Ubuntu (MB) | Windows (мс) | Windows (MB) | macOS (мс) | macOS (MB) |
|--------------|------------------|-----------------|--------------|-------------|------------|------------|
| Brute-force  | 10 (0.1)         | 5.69            | 2 (0.1)           | 5.12        | 29 (3.5)        | 0.14       |
| KMP          | 21 (1.6)         | 10.51           | 2 (0.2)           | 5.40        | 71 (27.6)        | 10.52      |
| Rabin-Karp   | 15 (0.1)         | 5.69            | 5 (0.2)           | 5.38        | 26 (9.5)        | 0.14       |
| Z-algorithm  | 22 (0.2)         | 10.51           | 3 (0.2)           | 5.42        | 43 (23.0)        | 0.16       |
| Shift-or     | —                | —               | —            | —           | —          | —          |
| Aho-Corasick | 40 (0.2)         | 7.69            | 1 (0.2)           | 6.03        | 50 (74.1)        | 6.81       |

---

### **2. Текст 1,000,000 символов, паттерн 10,000 символов (Подстрока не найдена)**

| Алгоритм      | Ubuntu (мс) | Ubuntu (MB) | Windows (мс) | Windows (MB) | macOS (мс) | macOS (MB) |
|--------------|------------------|-----------------|--------------|-------------|------------|------------|
| Brute-force  | 12 (0.1)         | 5.69            | 3 (0.1)           | 5.20        | 24 (8.2)        | 0.12       |
| KMP          | 23 (0.1)         | 10.51           | 2 (0.2)           | 5.45        | 53 (80.1)        | 0.14       |
| Rabin-Karp   | 20 (0.1)         | 5.69            | 1 (0.1)           | 5.41        | 29 (2.0)        | 0.12       |
| Z-algorithm  | 22 (0.9)         | 10.51           | 2 (0.2)           | 5.38        | 41 (2.9)        | 0.27       |
| Shift-or     | —                | —               | —            | —           | —          | —          |
| Aho-Corasick | 50 (0.1)         | 7.69            | 3 (0.1)           | 6.02        | 54 (46.2)        | 6.73       |

---

### **3. Текст 500,000 символов, паттерн 1,000 символов (Подстрока найдена)**

| Алгоритм      | Ubuntu (мс) | Ubuntu (MB) | Windows (мс) | Windows (MB) | macOS (мс) | macOS (MB) |
|--------------|------------------|-----------------|--------------|-------------|------------|------------|
| Brute-force  | 1 (0.1)               | 0.12            | 1 (0.1)           | 1.23        | 1 (0.1)         | 0.11       |
| KMP          | 9 (0.2)               | 7.20            | 1 (0.1)           | 4.78        | 29 (2.0)        | 6.08       |
| Rabin-Karp   | 1 (0.1)               | 0.25            | 2 (0.1)           | 1.98        | 1 (0.1)         | 0.11       |
| Z-algorithm  | 10 (0.2)              | 7.21            | 3 (0.1)           | 5.10        | 33 (2.9)        | 0.23       |
| Shift-or     | —                | —               | —            | —           | —          | —          |
| Aho-Corasick | 2 (0.1)               | 0.50            | 1 (0.1)           | 1.65        | 5 (3.7)         | 0.11       |

---

### **4. Текст 500,000 символов, паттерн 1,000 символов (Подстрока не найдена)**

| Алгоритм      | Ubuntu (мс) | Ubuntu (MB) | Windows (мс) | Windows (MB) | macOS (мс) | macOS (MB) |
|--------------|------------------|-----------------|--------------|-------------|------------|------------|
| Brute-force  | 6 (0.1)          | 0.25            | 2 (0.1)           | 1.96        | 13 (1.5)        | 3.36       |
| KMP          | 12 (0.2)         | 7.08            | 1 (0.1)           | 4.85        | 38 (5.6)        | 2.39       |
| Rabin-Karp   | 10 (0.1)         | 4.71            | 3 (0.1)           | 2.75        | 16 (2.0)        | 3.67       |
| Z-algorithm  | 11 (0.2)         | 7.21            | 1 (0.1)           | 5.12        | 18 (10.1)        | 0.12       |
| Shift-or     | —                | —               | —            | —           | —          | —          |
| Aho-Corasick | 23 (0.1)         | 4.95            | 2 (0.1)           | 4.42        | 24 (36.2)        | 3.77       |

---

### **5. Текст 1,000,000 символов, паттерн 10,000 символов (Подстрока не найдена, тест анти-Brute-force)**

| Алгоритм      | Ubuntu (мс) | Ubuntu (MB) | Windows (мс) | Windows (MB) | macOS (мс) | macOS (MB) |
|--------------|------------------|--------------------|--------------|-------------|------------|------------|
| Brute-force  | 111256 (219.6)   | 5.69               | 6258 (333.6)      | 6.00        | 279104 (193898.2)    | 5.73       |
| KMP          | 43 (0.7)         | 10.50              | 3 (0.1)           | 4.63        | 97 (38.4)        | 11.61      |
| Rabin-Karp   | 20 (0.1)         | 5.56               | 3 (0.1)           | 6.07        | 37 (0.2)        | 5.69       |
| Z-algorithm  | 42 (0.7)         | 10.50              | 2 (0.2)           | 4.93        | 64 (10.9)        | 10.50      |
| Shift-or     | —                | —                  | —            | —           | —          | —          |
| Aho-Corasick | 160 (0.2)        | 7.81               | 3 (0.1)           | 8.55        | 157 (26.8)       | 7.03       |

---

### **6. Текст 500,000 символов, паттерн 63 символа (Подстрока найдена)**

| Алгоритм      | Ubuntu (мс) | Ubuntu (MB) | Windows (мс) | Windows (MB) | macOS (мс) | macOS (MB) |
|--------------|------------------|-----------------|--------------|-------------|------------|------------|
| Brute-force  | 6 (0.2)               | 0.25            | 1 (0.1)           | 1.20        | 11 (0.6)        | 3.15       |
| KMP          | 12 (0.2)              | 7.20            | 2 (0.1)           | 4.85        | 35 (22.3)        | 6.08       |
| Rabin-Karp   | 9 (0.1)               | 4.69            | 3 (0.1)           | 2.50        | 32 (2.0)        | 3.88       |
| Z-algorithm  | 11 (0.2)              | 7.20            | 3 (0.1)           | 5.12        | 33 (0.2)        | 4.02       |
| Shift-or     | 28 (0.1)              | 4.70            | 1 (0.1)           | 4.28        | 31 (0.7)        | 4.38       |
| Aho-Corasick | 21 (0.1)              | 4.70            | 2 (0.1)           | 3.69        | 24 (16.2)        | 3.85       |

---

### **7. Текст 500,000 символов, паттерн 63 символа (Подстрока не найдена)**

| Алгоритм      | Ubuntu (мс) | Ubuntu (MB) | Windows (мс) | Windows (MB) | macOS (мс) | macOS (MB) |
|--------------|------------------|-----------------|--------------|-------------|------------|------------|
| Brute-force  | 6 (0.1)               | 0.25            | 1 (0.1)           | 1.24        | 17 (8.6)        | 3.20       |
| KMP          | 12 (0.2)              | 7.20            | 2 (0.1)           | 4.88        | 30 (6.5)        | 6.10       |
| Rabin-Karp   | 10 (0.1)              | 4.70            | 3 (0.1)           | 2.53        | 17 (2.6)        | 3.90       |
| Z-algorithm  | 11 (0.2)             | 7.20            | 1 (0.1)           | 5.10        | 19 (1.5)        | 4.05       |
| Shift-or     | 30 (0.1)              | 4.70            | 0 (0.1)           | 0.78            | 34 (5.5)        | 4.40       |
| Aho-Corasick | 21 (0.1)              | 4.70            | 2 (0.1)           | 3.72        | 36 (10.9)        | 3.87       |

---

## 2. Итоговый вывод

- **Brute-force** плохо работает на больших объемах данных, особенно в худшем сценарии (anti-Brute-force).
- **KMP и Z-algorithm** продемонстрировали стабильность, особенно при отсутствии подстроки.
- **Rabin-Karp** оказался конкурентоспособным на малых шаблонах, но его работа варьировалась в зависимости от данных.
- **Shift-or** применим только для коротких шаблонов (до 63 символов).
- **Aho-Corasick** в основном уступает другим алгоритмам.

### **Операционные системы**
- **Windows** показала минимальное время выполнения в некоторых тестах, особенно на коротких подстроках.
- **Ubuntu Linux** обеспечила наиболее **стабильные** результаты во всех тестах.
- **macOS** демонстрировала наиболее длинные задержки в среднем, но потребление памяти оказалось умеренным.

Таким образом, выбор лучшего алгоритма зависит от конкретных требований:
- Для длинных текстов **KMP** или **Z-algorithm**.  
- Для коротких шаблонов **Shift-or** (до 63 символов).  
- Для случайных данных **Rabin-Karp**, хотя возможны вариации времени из-за коллизий.  
